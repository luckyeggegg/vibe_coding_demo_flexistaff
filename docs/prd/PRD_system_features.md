# FlexiStaff 系统功能 PRD 文档

## 产品需求文档 (Product Requirements Document)

**文档版本**: v1.0
**创建日期**: 2026-01-25
**来源**: 从 PRD_landing_page.md 拆分
**产品名称**: FlexiStaff (Casual Staff Management Platform)
**文档类型**: 系统功能需求文档（后续开发参考）
**使用范围**: 企业内部系统 (Internal Use Only)
**目标市场**: 澳洲 (Australia)

---

## 1. 文档说明

本文档包含从 Landing Page PRD 中拆分出的系统级功能需求，供后续开发 Dashboard、认证系统、帮助系统等功能模块时参考。

---

## 2. 项目范围 (Project Scope)

### 2.1 范围内 (In Scope)

本 PRD 文档覆盖 **FlexiStaff Landing Page** 的设计与开发，具体包括：

| 类别 | 范围内容 | 说明 |
|------|----------|------|
| **页面模块** | Navigation Bar | 导航栏，包含 Logo、导航链接、登录按钮 |
| | Hero Section | 首屏区，系统介绍和主要 CTA |
| | Features Overview | 功能概览区，6 个核心功能卡片展示 |
| | Quick Start Guide | 快速开始区，3 步引导流程 |
| | FAQ Section | 常见问题区，8 个内部用户常见问题 |
| | Support Contact | 联系支持区，3 个内部支持渠道 |
| | Footer | 页脚，系统信息和快捷链接 |
| **认证集成** | 登录入口 | 提供登录按钮，跳转至认证页面 |
| | 登录状态检测 | 检测用户是否已登录，显示不同 UI 状态 |
| | SSO 跳转 | 支持跳转至公司 SSO 登录页面 |
| **响应式设计** | Desktop | ≥ 1280px 完整布局 |
| | Tablet | 768-1023px 适配布局 |
| | Mobile | < 768px 单列布局 + 汉堡菜单 |
| **静态内容** | 文案内容 | 英文 (Australian English) 界面文案 |
| | 图标资源 | 功能图标、Logo 等静态资源 |
| | 产品截图 | Dashboard 界面预览图 |

### 2.2 范围外 (Out of Scope)

以下内容**不属于**本 PRD 的交付范围：

| 类别 | 排除内容 | 说明 | 相关文档 |
|------|----------|------|----------|
| **主系统功能** | Dashboard 开发 | 登录后的主系统界面 | 另见 Dashboard PRD |
| | Booking 功能 | 预定兼职员工的完整流程 | 另见 Booking Module PRD |
| | Search 功能 | 搜索兼职员工的完整功能 | 另见 Search Module PRD |
| | Reports 功能 | 数据报表和分析功能 | 另见 Reports Module PRD |
| | My Schedule 功能 | 兼职员工个人日程管理 | 另见 Casual Staff PRD |
| **后端服务** | User API | 用户信息管理 API | 另见 Backend API PRD |
| | Booking API | 预定相关 API | 另见 Backend API PRD |
| | Notification Service | 邮件/消息通知服务 | 另见 Notification PRD |
| **认证系统** | SSO 服务端实现 | SSO 身份提供商配置 | IT Infrastructure 负责 |
| | 用户权限管理 | RBAC 权限系统 | 另见 Auth System PRD |
| **移动端** | Native iOS App | 原生 iOS 应用 | 未规划 |
| | Native Android App | 原生 Android 应用 | 未规划 |
| **营销功能** | SEO 优化 | 搜索引擎优化（内部系统不需要） | N/A |
| | Analytics 埋点 | 用户行为分析（如 GA） | 可后续迭代 |
| | A/B Testing | 页面 A/B 测试 | 可后续迭代 |

### 2.3 依赖项 (Dependencies)

#### 2.3.1 外部依赖

| 依赖项 | 类型 | 提供方 | 说明 | 风险等级 |
|--------|------|--------|------|----------|
| SSO / Identity Provider | 服务 | IT Infrastructure | 公司统一身份认证服务 (Azure AD / Okta) | 高 |
| Company DNS | 基础设施 | IT Infrastructure | 域名解析 (flexistaff.company.com.au) | 中 |
| SSL Certificate | 安全 | IT Infrastructure | HTTPS 证书 | 中 |
| CDN Service | 服务 | Cloud Provider | 静态资源分发 (如 CloudFront) | 低 |

#### 2.3.2 内部依赖

| 依赖项 | 类型 | 提供方 | 说明 | 状态 |
|--------|------|--------|------|------|
| FlexiStaff Dashboard | 应用 | Development Team | 登录后跳转的主系统 | 需同步开发 |
| User Profile Service | API | Backend Team | 获取用户基本信息和角色 | 需确认接口 |
| Help Documentation | 内容 | Product Team | 用户帮助文档内容 | 需准备 |
| Brand Assets | 资源 | Design Team | Logo、品牌色等设计资源 | 需提供 |

### 2.4 假设条件 (Assumptions)

| 编号 | 假设条件 | 影响 | 验证状态 |
|------|----------|------|----------|
| A1 | 公司已有可用的 SSO 基础设施 (Azure AD / Okta) | 若无，需额外开发传统登录或部署 SSO | 待确认 |
| A2 | FlexiStaff Dashboard 将与 Landing Page 同步或先于上线 | 若 Dashboard 未就绪，登录后无处跳转 | 待确认 |
| A3 | 目标用户已有公司邮箱账号 | 若无，需考虑账号创建流程 | 已确认 |
| A4 | 内部网络可正常访问部署环境 | 若有网络限制，需配置 VPN 或白名单 | 待确认 |
| A5 | 用户使用现代浏览器 (Chrome, Firefox, Safari, Edge 最近 2 个主版本) | 不支持 IE11 及以下 | 已确认 |
| A6 | 帮助文档内容由 Product Team 提供 | 开发团队仅负责页面展示 | 待确认 |

### 2.5 约束条件 (Constraints)

| 类别 | 约束条件 | 说明 |
|------|----------|------|
| **技术约束** | 需兼容公司现有技术栈 | 优先使用公司已有的前端框架和 UI 库 |
| | 需部署在公司指定的云环境 | AWS Sydney Region 或公司内部服务器 |
| | 需符合公司 IT 安全政策 | 包括数据加密、访问控制等要求 |
| **合规约束** | 符合 Australian Privacy Principles (APPs) | 用户数据处理需合规 |
| | 符合公司内部数据分类政策 | 内部系统数据不对外公开 |
| **资源约束** | 设计资源依赖 Design Team 支持 | 若无专职设计，使用 UI 组件库 |
| | 内容依赖 Product Team 提供 | FAQ、帮助文档等内容 |
| **时间约束** | 需与 Dashboard 上线时间协调 | Landing Page 应先于或同时上线 |

### 2.6 版本规划 (Release Scope)

| 版本 | 范围 | 说明 |
|------|------|------|
| **v1.0 (MVP)** | 核心 Landing Page | Navigation + Hero + Features + Quick Start + FAQ + Support + Footer |
| | 基础登录集成 | SSO 跳转，登录状态检测 |
| | 响应式设计 | Desktop + Tablet + Mobile 适配 |
| **v1.1 (迭代)** | 系统公告区 | 显示维护通知、新功能发布 |
| | 培训视频嵌入 | 新员工培训材料 |
| **v2.0 (未来)** | 多语言支持 | 添加中文界面 |
| | 深色模式 | 支持系统深色模式偏好 |
| | 快捷入口 | 常用功能快捷方式 |

---

## 3. 目标用户

### 3.1 内部用户角色
| 用户角色 | 描述 | 权限级别 | 核心诉求 |
|----------|------|----------|----------|
| Full-time Staff (全职员工) | 需要临时调配 casual staff 的员工 | Standard | 快速查询、预定可用的 casual staff |
| Team Leader / Manager (管理人员) | 部门/团队负责人 | Elevated | 统筹资源使用，查看数据报表 |
| HR / Admin (人事行政) | 人力资源管理人员 | Admin | 管理 casual staff 信息，系统配置 |
| Casual Staff (兼职员工) | 公司在册的兼职/临时员工 | Limited | 查看个人排班，接受/拒绝预定 |

### 3.2 用户痛点（系统需重点解决）
1. **Lack of Visibility**: 不清楚哪些 casual staff 当前可用，需逐个询问
2. **Booking Chaos**: 依赖口头约定或 Excel 表格，易出现重复预定
3. **High Communication Cost**: 每次变更都需人工通知，耗时易错
4. **No Data Insights**: 无法直观了解资源使用情况和成本
5. **Poor Casual Staff Experience**: 兼职员工无法自主管理自己的日程

---

## 4. FAQ 功能模块

### 4.1 常见问题区 (FAQ Section)

**目标**: 解答内部用户常见疑问，减少 IT 支持请求

**标题**: "Frequently Asked Questions"

**问题列表** (针对内部用户调整):

| 问题 (English) | 答案要点 |
|----------------|----------|
| How do I log in to FlexiStaff? | Use your company email and SSO credentials / Contact IT if you don't have access |
| Who can I book through this system? | All registered casual staff in our company database |
| How do I check a casual staff member's availability? | Use the Search function, filter by date/time/skills |
| What happens after I make a booking? | The casual staff receives an email notification and can accept/decline |
| Can I cancel or reschedule a booking? | Yes, go to My Bookings and select the booking to modify |
| How do I update my availability as a casual staff? | Log in and go to My Schedule to set your available times |
| Who do I contact for technical issues? | Contact IT Support via email or internal helpdesk |
| Is my data secure? | Yes, all data is stored securely on company servers with encryption |

**交互设计**:
- 折叠/展开式 (Accordion)
- 默认展开第一个问题
- 底部提供 "Still have questions? Contact Support" 链接

---

## 5. 支持联系模块

### 5.1 联系支持区 (Support Contact Section)

**目标**: 提供清晰的内部支持渠道

**标题**: "Need Help?"

**内容**:

| 支持类型 | 联系方式 | 说明 |
|----------|----------|------|
| IT Technical Support | it.support@company.com.au | 系统登录、技术问题 |
| HR Enquiries | hr@company.com.au | 员工信息、权限申请 |
| System Admin | flexistaff.admin@company.com.au | 数据问题、功能反馈 |
| User Guide | [Link to Documentation] | 在线帮助文档 |

**设计要求**:
- 简洁的卡片式布局
- 每个联系方式配有对应图标
- 可点击的邮箱链接 (mailto:)

---

## 6. 认证系统设计

### 6.1 登录交互

**认证方式选项**:

| 方式 | 说明 | 推荐 |
|------|------|------|
| SSO (Single Sign-On) | 使用公司统一身份认证 | 推荐 (如已有) |
| Email + Password | 传统邮箱密码登录 | 备选 |
| Microsoft 365 / Google Workspace | OAuth 集成 | 可选 |

**登录表单字段** (如使用传统登录):

| 字段 | 类型 | 是否必填 | 验证规则 |
|------|------|----------|----------|
| Email | 邮箱 | 是 | 公司邮箱格式 (@company.com.au) |
| Password | 密码 | 是 | 符合公司密码策略 |
| Remember Me | 复选框 | 否 | - |

### 6.2 认证流程架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          Authentication Flow                                 │
└─────────────────────────────────────────────────────────────────────────────┘

    User                  Landing Page            Auth Service        Identity Provider
     │                        │                       │                    │
     │   1. Click Login       │                       │                    │
     │───────────────────────▶│                       │                    │
     │                        │                       │                    │
     │                        │  2. Redirect to Auth  │                    │
     │                        │──────────────────────▶│                    │
     │                        │                       │                    │
     │                        │                       │  3. Check SSO      │
     │◀─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│─────────────────▶  │
     │   4. SSO Login Page (if needed)               │                    │
     │                        │                       │                    │
     │   5. Enter Credentials │                       │                    │
     │─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─▶│────────────────── ▶│
     │                        │                       │                    │
     │                        │                       │  6. Validate       │
     │                        │                       │◀───────────────────│
     │                        │                       │                    │
     │                        │  7. Issue Token (JWT) │                    │
     │                        │◀──────────────────────│                    │
     │                        │                       │                    │
     │  8. Store Token &      │                       │                    │
     │     Redirect to        │                       │                    │
     │◀───────────────────────│                       │                    │
     │     Dashboard          │                       │                    │
     │                        │                       │                    │

Token Structure (JWT):
┌─────────────────────────────────────────────────────────────────────────────┐
│  Header          │  Payload                    │  Signature                 │
├─────────────────────────────────────────────────────────────────────────────┤
│  {               │  {                          │                            │
│    "alg": "RS256"│    "sub": "user@company.au" │  RSASHA256(                │
│    "typ": "JWT"  │    "name": "John Doe"       │    base64(header) + "." +  │
│  }               │    "role": "full_time_staff"│    base64(payload),        │
│                  │    "iat": 1705555200        │    privateKey              │
│                  │    "exp": 1705641600        │  )                         │
│                  │  }                          │                            │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 7. 技术实现建议

### 7.1 技术栈建议

| 层级 | 推荐技术 | 说明 |
|------|----------|------|
| 前端框架 | React / Vue.js / Next.js | 组件化开发 |
| UI 组件 | Tailwind CSS + Headless UI / Ant Design | 快速开发 |
| 认证 | Azure AD / Okta / Auth0 / 自建 | SSO 集成 |
| 部署 | AWS / Azure / 公司内部服务器 | 根据公司 IT 策略 |
| 监控 | Application Insights / Sentry | 错误追踪 |

### 7.2 性能要求

| 指标 | 目标值 |
|------|--------|
| First Contentful Paint (FCP) | < 1.5s |
| Largest Contentful Paint (LCP) | < 2.5s |
| Cumulative Layout Shift (CLS) | < 0.1 |
| Time to Interactive (TTI) | < 3s |

### 7.3 安全要求

| 要求 | 说明 |
|------|------|
| HTTPS | 强制使用 HTTPS |
| Authentication | SSO 或安全的登录机制 |
| Session Management | 合理的 session 超时设置 |
| Data Protection | 符合 Australian Privacy Principles (APPs) |

---

## 8. 上线检查清单

### 8.1 功能检查
- [ ] 登录功能正常（SSO / 传统登录）
- [ ] 所有内部链接可正常跳转
- [ ] 导航锚点跳转正确
- [ ] 移动端适配正常
- [ ] 浏览器兼容性测试（Chrome, Firefox, Safari, Edge）

### 8.2 内容检查
- [ ] 英文文案无拼写错误
- [ ] 联系方式正确（邮箱地址有效）
- [ ] 图片正常显示
- [ ] 帮助文档链接有效

### 8.3 技术检查
- [ ] HTTPS 证书配置
- [ ] SSO 集成测试通过
- [ ] 页面加载速度达标
- [ ] 错误页面配置 (404, 500)
- [ ] 日志记录正常

### 8.4 合规检查
- [ ] 隐私政策链接有效
- [ ] 符合公司 IT 安全政策
- [ ] 符合 Australian Privacy Principles (如适用)

---

## 9. 后续迭代方向

| 优先级 | 功能 | 说明 |
|--------|------|------|
| P1 | 培训视频嵌入 | 新员工培训材料 |
| P1 | 多语言支持 | 添加中文界面（如有需求） |
| P2 | 系统公告区 | 显示维护通知、新功能发布 |
| P2 | 快捷入口 | 常用功能快捷方式 |
| P3 | 深色模式 | 支持系统深色模式 |

---

## 10. 用户流程图 (User Flow Diagrams)

### 10.1 Landing Page 整体用户流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        用户访问 Landing Page                                  │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
                    ┌─────────────────────────────────────┐
                    │       检查用户登录状态               │
                    │   (Check Authentication Status)     │
                    └─────────────────────────────────────┘
                                      │
                     ┌────────────────┴────────────────┐
                     │                                 │
                     ▼                                 ▼
            ┌────────────────┐               ┌────────────────┐
            │   未登录用户    │               │   已登录用户    │
            │ (Unauthenticated)│              │ (Authenticated) │
            └────────────────┘               └────────────────┘
                     │                                 │
                     ▼                                 ▼
    ┌────────────────────────────────┐    ┌────────────────────────────┐
    │ 显示 Landing Page 完整内容      │    │ 显示 "Go to Dashboard" 按钮│
    │ • Hero Section                 │    │ 可选择：                    │
    │ • Features Overview            │    │ • 直接进入 Dashboard        │
    │ • Quick Start Guide            │    │ • 浏览 Landing Page         │
    │ • FAQ                          │    │ • 查看 Quick Start Guide    │
    │ • Support Contact              │    └────────────────────────────┘
    └────────────────────────────────┘                   │
                     │                                   │
                     ▼                                   │
         ┌───────────────────┐                          │
         │  点击 "Login" 按钮 │                          │
         └───────────────────┘                          │
                     │                                   │
                     ▼                                   │
    ┌────────────────────────────────┐                  │
    │         认证方式选择            │                  │
    └────────────────────────────────┘                  │
                     │                                   │
         ┌───────────┼───────────┐                      │
         │           │           │                      │
         ▼           ▼           ▼                      │
    ┌─────────┐ ┌─────────┐ ┌─────────┐                │
    │  SSO    │ │ Email/  │ │ OAuth   │                │
    │ Login   │ │ Password│ │ (M365)  │                │
    └─────────┘ └─────────┘ └─────────┘                │
         │           │           │                      │
         └───────────┼───────────┘                      │
                     ▼                                   │
    ┌────────────────────────────────┐                  │
    │        认证成功/失败            │                  │
    └────────────────────────────────┘                  │
                     │                                   │
         ┌───────────┴───────────┐                      │
         │                       │                      │
         ▼                       ▼                      │
    ┌─────────┐           ┌─────────┐                  │
    │  成功   │           │  失败   │                  │
    │ Success │           │ Failed  │                  │
    └─────────┘           └─────────┘                  │
         │                       │                      │
         │                       ▼                      │
         │              ┌─────────────────┐            │
         │              │ 显示错误信息     │            │
         │              │ 重新尝试/联系IT  │            │
         │              └─────────────────┘            │
         │                                              │
         └──────────────────┬───────────────────────────┘
                            │
                            ▼
              ┌──────────────────────────┐
              │     进入 Dashboard       │
              │   (Main Application)     │
              └──────────────────────────┘
```

### 10.2 页面导航交互流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                           Navigation Bar                             │
├─────────────────────────────────────────────────────────────────────┤
│  [Logo]    [Features]  [Quick Start]  [FAQ]  [Support]    [Login]   │
└─────────────────────────────────────────────────────────────────────┘
       │          │            │          │        │            │
       │          │            │          │        │            │
       ▼          ▼            ▼          ▼        ▼            ▼
  ┌────────┐ ┌─────────┐ ┌─────────┐ ┌────────┐ ┌────────┐ ┌────────┐
  │回到顶部│ │锚点跳转 │ │锚点跳转 │ │锚点跳转│ │锚点跳转│ │登录页面│
  │#top    │ │#features│ │#start   │ │#faq    │ │#support│ │/login  │
  └────────┘ └─────────┘ └─────────┘ └────────┘ └────────┘ └────────┘

页面滚动时导航栏行为:
┌─────────────────────────────────────────────────┐
│ 初始状态 (Top)        │ 透明/半透明背景          │
├─────────────────────────────────────────────────┤
│ 滚动后 (Scrolled)     │ 实色背景 + 阴影          │
├─────────────────────────────────────────────────┤
│ 当前区块高亮          │ 对应导航项显示 active 状态│
└─────────────────────────────────────────────────┘
```

### 10.3 帮助系统用户流程

```
用户遇到问题
      │
      ▼
┌─────────────────────┐
│  查看 FAQ Section   │
└─────────────────────┘
      │
      ├─── 找到答案 ───▶ 问题解决 ✓
      │
      ▼ (未找到)
┌─────────────────────┐
│ 点击 "View Full     │
│ User Guide" 链接    │
└─────────────────────┘
      │
      ▼
┌─────────────────────┐
│  查阅详细帮助文档    │
└─────────────────────┘
      │
      ├─── 找到答案 ───▶ 问题解决 ✓
      │
      ▼ (仍未解决)
┌─────────────────────┐
│ 联系 Support        │
├─────────────────────┤
│ • IT Support        │──▶ 技术问题
│ • HR Enquiries      │──▶ 权限/员工信息
│ • System Admin      │──▶ 数据/功能反馈
└─────────────────────┘
```

---

## 11. 系统架构 (System Architecture)

### 11.1 Landing Page 技术架构图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              CLIENT LAYER                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │
│  │   Desktop    │  │   Tablet     │  │   Mobile     │  │   Mobile App │    │
│  │   Browser    │  │   Browser    │  │   Browser    │  │  (WebView)   │    │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘    │
│          │                │                │                 │              │
│          └────────────────┴────────────────┴─────────────────┘              │
│                                    │                                        │
│                                    ▼                                        │
│                        ┌─────────────────────┐                              │
│                        │   HTTPS / TLS 1.3   │                              │
│                        └─────────────────────┘                              │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                              CDN / EDGE LAYER                               │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    CloudFlare / AWS CloudFront                       │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────────┐  │   │
│  │  │ Static File │  │   DDoS      │  │   SSL/TLS Termination       │  │   │
│  │  │   Caching   │  │ Protection  │  │                             │  │   │
│  │  └─────────────┘  └─────────────┘  └─────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           LOAD BALANCER LAYER                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                    ┌─────────────────────────────┐                          │
│                    │    Application Load         │                          │
│                    │       Balancer (ALB)        │                          │
│                    │   • Health Checks           │                          │
│                    │   • SSL Offloading          │                          │
│                    │   • Path-based Routing      │                          │
│                    └─────────────────────────────┘                          │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
                    ┌────────────────┼────────────────┐
                    │                │                │
                    ▼                ▼                ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          APPLICATION LAYER                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐             │
│  │   Web Server    │  │   Web Server    │  │   Web Server    │             │
│  │   Instance 1    │  │   Instance 2    │  │   Instance N    │             │
│  │   (Next.js/     │  │   (Next.js/     │  │   (Next.js/     │             │
│  │    React SSR)   │  │    React SSR)   │  │    React SSR)   │             │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘             │
│          │                    │                    │                        │
│          └────────────────────┴────────────────────┘                        │
│                               │                                             │
└───────────────────────────────┼─────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          SERVICES LAYER                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐          │
│  │  Authentication  │  │   User Profile   │  │   Content API    │          │
│  │     Service      │  │    Service       │  │   (FAQ, Guide)   │          │
│  │  • SSO (Azure AD)│  │  • User Info     │  │  • Static JSON   │          │
│  │  • OAuth 2.0     │  │  • Role Check    │  │  • CMS (Optional)│          │
│  │  • JWT Tokens    │  │  • Preferences   │  │                  │          │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘          │
│          │                      │                      │                    │
│          └──────────────────────┴──────────────────────┘                    │
│                                 │                                           │
└─────────────────────────────────┼───────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           DATA LAYER                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐          │
│  │   PostgreSQL /   │  │     Redis        │  │   Blob Storage   │          │
│  │   SQL Server     │  │   (Session &     │  │   (Images,       │          │
│  │   (User Data)    │  │    Cache)        │  │    Documents)    │          │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘          │
└─────────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                      MONITORING & LOGGING LAYER                             │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │ Application │  │   Error     │  │  Log        │  │  Alerting   │        │
│  │ Performance │  │  Tracking   │  │ Aggregation │  │  (PagerDuty │        │
│  │ Monitoring  │  │  (Sentry)   │  │ (ELK/Splunk)│  │   /Slack)   │        │
│  │ (APM)       │  │             │  │             │  │             │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 11.2 前端组件架构

```
                         ┌─────────────────────────┐
                         │       App Root          │
                         │   (Layout Provider)     │
                         └───────────┬─────────────┘
                                     │
              ┌──────────────────────┼──────────────────────┐
              │                      │                      │
              ▼                      ▼                      ▼
    ┌─────────────────┐   ┌─────────────────┐   ┌─────────────────┐
    │   AuthContext   │   │   ThemeContext  │   │   AppContext    │
    │   Provider      │   │   Provider      │   │   Provider      │
    └─────────────────┘   └─────────────────┘   └─────────────────┘
                                     │
                                     ▼
                         ┌─────────────────────────┐
                         │    Landing Page         │
                         │    (Main Component)     │
                         └───────────┬─────────────┘
                                     │
     ┌───────────┬───────────┬───────┴───────┬───────────┬───────────┐
     │           │           │               │           │           │
     ▼           ▼           ▼               ▼           ▼           ▼
┌─────────┐ ┌─────────┐ ┌─────────┐   ┌─────────┐ ┌─────────┐ ┌─────────┐
│ NavBar  │ │  Hero   │ │Features │   │ Quick   │ │   FAQ   │ │ Footer  │
│Component│ │ Section │ │ Section │   │ Start   │ │ Section │ │Component│
└─────────┘ └─────────┘ └─────────┘   │ Section │ └─────────┘ └─────────┘
     │           │           │        └─────────┘      │           │
     │           │           │             │           │           │
     ▼           ▼           ▼             ▼           ▼           ▼
┌─────────┐ ┌─────────┐ ┌─────────┐   ┌─────────┐ ┌─────────┐ ┌─────────┐
│ Logo    │ │ CTA     │ │Feature  │   │ Step    │ │Accordion│ │ Link    │
│ NavLink │ │ Button  │ │ Card    │   │ Card    │ │ Item    │ │ List    │
│ UserMenu│ │ Preview │ │         │   │         │ │         │ │         │
└─────────┘ └─────────┘ └─────────┘   └─────────┘ └─────────┘ └─────────┘

Shared Components (共享组件):
┌─────────────────────────────────────────────────────────────────────┐
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │
│  │ Button  │  │  Card   │  │  Icon   │  │ Spinner │  │  Modal  │   │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │
│  │  Input  │  │ Tooltip │  │  Badge  │  │ Alert   │  │Container│   │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │
└─────────────────────────────────────────────────────────────────────┘
```

### 11.3 部署架构 (Deployment Architecture)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Production Environment                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                        AWS / Azure Region (Sydney)                  │   │
│   │  ┌─────────────────────────────────────────────────────────────┐   │   │
│   │  │                    Availability Zone A                       │   │   │
│   │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │   │   │
│   │  │  │   Web App   │  │   Web App   │  │   Redis     │          │   │   │
│   │  │  │   (Blue)    │  │   (Green)   │  │   Primary   │          │   │   │
│   │  │  └─────────────┘  └─────────────┘  └─────────────┘          │   │   │
│   │  └─────────────────────────────────────────────────────────────┘   │   │
│   │                                                                     │   │
│   │  ┌─────────────────────────────────────────────────────────────┐   │   │
│   │  │                    Availability Zone B                       │   │   │
│   │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │   │   │
│   │  │  │   Web App   │  │   Web App   │  │   Redis     │          │   │   │
│   │  │  │   (Blue)    │  │   (Green)   │  │   Replica   │          │   │   │
│   │  │  └─────────────┘  └─────────────┘  └─────────────┘          │   │   │
│   │  └─────────────────────────────────────────────────────────────┘   │   │
│   │                                                                     │   │
│   │  ┌─────────────────────────────────────────────────────────────┐   │   │
│   │  │                        Database                              │   │   │
│   │  │  ┌─────────────────────┐  ┌─────────────────────┐           │   │   │
│   │  │  │  PostgreSQL Primary │  │  PostgreSQL Standby │           │   │   │
│   │  │  │  (Zone A)           │◀▶│  (Zone B)           │           │   │   │
│   │  │  └─────────────────────┘  └─────────────────────┘           │   │   │
│   │  └─────────────────────────────────────────────────────────────┘   │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                         UAT / Staging Environment                            │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │   Web App   │  │   Redis     │  │  Database   │  │   Auth      │        │
│  │   Single    │  │   Single    │  │   Single    │  │   Test      │        │
│  │   Instance  │  │   Instance  │  │   Instance  │  │   Instance  │        │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                          Dev Environment                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    Local Docker Compose                              │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                  │   │
│  │  │   Web App   │  │   Redis     │  │  Database   │                  │   │
│  │  │   Container │  │   Container │  │  Container  │                  │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘                  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 12. 回滚方案 (Rollback Plan)

### 12.1 回滚触发条件

| 条件类型 | 触发阈值 | 说明 |
|----------|----------|------|
| **Critical Error** | 任意 | 系统完全无法访问、安全漏洞 |
| **Error Rate** | > 5% | 5分钟内错误率超过5% |
| **Response Time** | P95 > 5s | 响应时间严重超标 |
| **Authentication Failure** | > 10% | SSO 登录失败率过高 |
| **User Reports** | > 10个 | 短时间内收到多个用户问题报告 |

### 12.2 回滚策略

#### 12.2.1 蓝绿部署回滚 (Blue-Green Deployment)

```
                        正常部署状态
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  Load Balancer ───────────▶  Green (New Version v2.0)  ✓       │
│                              Blue  (Old Version v1.9)  [Standby]│
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

                        发现问题后回滚
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  Load Balancer ───────────▶  Blue  (Old Version v1.9)  ✓       │
│       │                      Green (New Version v2.0)  ✗        │
│       │                                                         │
│       └── Traffic 切换至 Blue (< 1 分钟完成)                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

回滚步骤:
1. 运维人员执行 ALB 流量切换命令
2. 所有新请求立即路由到 Blue 环境
3. Green 环境保持运行以便问题排查
4. 确认 Blue 环境稳定后，问题修复再重新部署
```

#### 12.2.2 滚动更新回滚 (Rolling Update)

```
发现问题时的滚动回滚:

时间点 T0: 发现问题
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│ Pod 1   │ │ Pod 2   │ │ Pod 3   │ │ Pod 4   │
│ v2.0 ✗  │ │ v2.0    │ │ v2.0    │ │ v2.0    │
└─────────┘ └─────────┘ └─────────┘ └─────────┘

时间点 T1: 开始回滚
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│ Pod 1   │ │ Pod 2   │ │ Pod 3   │ │ Pod 4   │
│ v1.9 ✓  │ │ v2.0→1.9│ │ v2.0    │ │ v2.0    │
└─────────┘ └─────────┘ └─────────┘ └─────────┘

时间点 T2: 回滚完成
┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐
│ Pod 1   │ │ Pod 2   │ │ Pod 3   │ │ Pod 4   │
│ v1.9 ✓  │ │ v1.9 ✓  │ │ v1.9 ✓  │ │ v1.9 ✓  │
└─────────┘ └─────────┘ └─────────┘ └─────────┘

回滚命令 (Kubernetes):
$ kubectl rollout undo deployment/flexistaff-landing
```

### 12.3 回滚检查清单

#### 12.3.1 回滚前检查

| 检查项 | 负责人 | 确认 |
|--------|--------|------|
| 确认问题现象和影响范围 | On-call Engineer | [ ] |
| 通知相关团队成员 | Team Lead | [ ] |
| 确认回滚版本可用 | DevOps | [ ] |
| 备份当前日志/错误信息 | On-call Engineer | [ ] |
| 确认数据库无需回滚 (Landing Page 通常无需) | DBA | [ ] |

#### 12.3.2 回滚执行步骤

```
┌──────────────────────────────────────────────────────────────────────────┐
│                        回滚执行流程                                       │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Step 1: 确认回滚决定                                                    │
│  ┌────────────────────────────────────────────────────────────────────┐  │
│  │ • Team Lead 或 On-call Manager 批准回滚                            │  │
│  │ • 记录决定时间和原因                                               │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                              │                                           │
│                              ▼                                           │
│  Step 2: 执行流量切换/版本回滚                                           │
│  ┌────────────────────────────────────────────────────────────────────┐  │
│  │ 蓝绿部署:                                                          │  │
│  │   $ aws elbv2 modify-listener --listener-arn <arn>                 │  │
│  │     --default-actions Type=forward,TargetGroupArn=<blue-tg-arn>    │  │
│  │                                                                    │  │
│  │ Kubernetes:                                                        │  │
│  │   $ kubectl rollout undo deployment/flexistaff-landing -n prod     │  │
│  │                                                                    │  │
│  │ Docker Compose:                                                    │  │
│  │   $ docker-compose -f docker-compose.prod.yml down                 │  │
│  │   $ docker-compose -f docker-compose.prod.yml up -d --no-build     │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                              │                                           │
│                              ▼                                           │
│  Step 3: 验证回滚成功                                                    │
│  ┌────────────────────────────────────────────────────────────────────┐  │
│  │ • 检查 Landing Page 可访问                                         │  │
│  │ • 检查登录功能正常                                                 │  │
│  │ • 检查错误率下降                                                   │  │
│  │ • 检查版本号显示正确                                               │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                              │                                           │
│                              ▼                                           │
│  Step 4: 发送通知                                                        │
│  ┌────────────────────────────────────────────────────────────────────┐  │
│  │ • Slack 通知: #ops-alerts, #dev-team                               │  │
│  │ • 邮件通知: 相关 Stakeholders                                      │  │
│  │ • 更新 Incident Ticket                                             │  │
│  └────────────────────────────────────────────────────────────────────┘  │
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

#### 12.3.3 回滚后验证

| 验证项 | 验证方法 | 预期结果 |
|--------|----------|----------|
| 页面可访问性 | 访问 Landing Page URL | 正常加载，无错误 |
| 版本确认 | 检查 Footer 版本号 | 显示回滚前版本 |
| 登录功能 | 测试 SSO 登录 | 登录成功，跳转 Dashboard |
| 错误监控 | 查看 Sentry/APM | 错误率恢复正常 |
| 响应时间 | 查看 APM Dashboard | P95 < 2s |
| 用户反馈 | 检查支持渠道 | 无新问题报告 |

### 12.4 回滚通知模板

#### Slack 通知模板
```
🔴 [ROLLBACK] FlexiStaff Landing Page

Environment: Production
Action: Rollback from v2.0 to v1.9
Reason: High error rate detected (>5% in 5 minutes)
Time: 2026-01-19 14:30 AEST
Initiated by: @john.doe

Status: ✅ Completed
Impact: Users may have experienced login issues for ~5 minutes

Next Steps:
- Root cause analysis in progress
- Post-mortem scheduled for tomorrow 10am AEST

Ticket: INC-2026-0119-001
```

#### 邮件通知模板
```
Subject: [Incident] FlexiStaff Landing Page Rollback - Resolved

Dear Team,

We have completed a rollback of the FlexiStaff Landing Page.

Summary:
- Environment: Production
- Previous Version: v2.0.0
- Rolled Back To: v1.9.0
- Duration of Issue: ~5 minutes
- Impact: Some users experienced login failures

Timeline:
- 14:25 AEST: Deployment of v2.0.0 completed
- 14:28 AEST: Monitoring alerts triggered (error rate spike)
- 14:30 AEST: Rollback decision made
- 14:31 AEST: Rollback executed
- 14:32 AEST: System verified stable

Root Cause: Under investigation

Action Items:
1. Complete root cause analysis
2. Fix identified issues in v2.0.0
3. Schedule re-deployment after fixes verified

Please reach out if you have any questions.

Best regards,
DevOps Team
```

### 12.5 回滚时间目标 (RTO)

| 场景 | 目标回滚时间 | 说明 |
|------|--------------|------|
| 蓝绿部署切换 | < 1 分钟 | 仅需切换 Load Balancer |
| Kubernetes 滚动回滚 | < 5 分钟 | 依赖 Pod 数量和启动时间 |
| 静态资源回滚 | < 2 分钟 | CDN 缓存清除 + 回滚 |
| 数据库回滚 (如需) | < 30 分钟 | 最坏情况，需 DBA 介入 |

### 12.6 回滚决策树

```
                    ┌───────────────────────────┐
                    │     检测到异常/问题       │
                    └─────────────┬─────────────┘
                                  │
                                  ▼
                    ┌───────────────────────────┐
                    │   问题是否影响用户访问？   │
                    └─────────────┬─────────────┘
                                  │
                    ┌─────────────┴─────────────┐
                    │                           │
                    ▼                           ▼
              ┌──────────┐               ┌──────────┐
              │    是    │               │    否    │
              └────┬─────┘               └────┬─────┘
                   │                          │
                   ▼                          ▼
    ┌──────────────────────────┐   ┌──────────────────────────┐
    │ 是否可以快速修复 (<15min)│   │   记录问题，安排修复     │
    └──────────────┬───────────┘   └──────────────────────────┘
                   │
         ┌─────────┴─────────┐
         │                   │
         ▼                   ▼
    ┌──────────┐        ┌──────────┐
    │    是    │        │    否    │
    └────┬─────┘        └────┬─────┘
         │                   │
         ▼                   ▼
┌────────────────────┐  ┌────────────────────┐
│ 尝试快速修复       │  │  立即执行回滚      │
│ 设置15分钟 Timer   │  │                    │
└─────────┬──────────┘  └────────────────────┘
          │
          ▼
┌────────────────────┐
│  15分钟内修复？    │
└─────────┬──────────┘
          │
    ┌─────┴─────┐
    │           │
    ▼           ▼
┌────────┐  ┌────────┐
│  成功  │  │  失败  │───▶ 执行回滚
└────────┘  └────────┘
```

---

## 13. 附录

### 13.1 设计参考
- Atlassian Internal Tools
- Microsoft 365 Admin Portal
- Google Workspace Admin
- Slack Landing Page (简洁风格参考)

### 13.2 术语表

| 术语 | 英文 | 说明 |
|------|------|------|
| 兼职员工 | Casual Staff / Casual Employee | 澳洲常用术语，指非固定工时的临时员工 |
| 全职员工 | Full-time Staff / Permanent Employee | 固定工时的正式员工 |
| 预定 | Booking | 预约兼职员工的工作时段 |
| 可用性 | Availability | 兼职员工的空闲时间 |

---

**文档更新记录**

| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|----------|--------|
| v1.0 | 2026-01-25 | 从 PRD_landing_page.md 拆分系统级功能需求 | - |
